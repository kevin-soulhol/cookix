{
  "version": 3,
  "sources": ["../../../app/routes/partages._index.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/partages._index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/partages._index.tsx\");\n  import.meta.hot.lastModified = \"1743068383846.0764\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { Link, useLoaderData, useFetcher } from \"@remix-run/react\";\nimport Layout from \"~/components/Layout\";\nexport async function loader({\n  request\n}) {\n  // Appeler l'API pour obtenir les partages\n  const apiUrl = new URL(`${request.url.split('/').slice(0, 3).join('/')}/api/share`);\n  const cookies = request.headers.get(\"Cookie\");\n  const response = await fetch(apiUrl.toString(), {\n    headers: {\n      Cookie: cookies || \"\" // Transmettre les cookies\n    }\n  });\n  const data = await response.json();\n  return json(data);\n}\nexport default function PartagesPage() {\n  _s();\n  const {\n    pendingInvitations,\n    sharedWithMe,\n    sharedByMe,\n    success,\n    message\n  } = useLoaderData();\n  const deleteFetcher = useFetcher();\n  const acceptFetcher = useFetcher();\n  return <Layout pageTitle=\"Partages\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n                <h1 className=\"text-2xl font-bold mb-8\">Mes partages</h1>\n\n                {!success && <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-6 text-red-700\">\n                        {message}\n                    </div>}\n\n                {/* Invitations en attente */}\n                <div className=\"mb-12\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Invitations en attente</h2>\n\n                    {pendingInvitations?.length > 0 ? <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                            <ul className=\"divide-y divide-gray-200\">\n                                {pendingInvitations.map(invitation => <li key={invitation.id} className=\"p-4 hover:bg-gray-50\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <div>\n                                                <h3 className=\"font-medium text-gray-900\">\n                                                    Invitation de {invitation.sharedByUser.email}\n                                                </h3>\n                                                <p className=\"text-sm text-gray-500\">\n                                                    {invitation.includeShoppingList ? \"Menu et liste de courses\" : \"Menu uniquement\"}\n                                                </p>\n                                                <p className=\"text-xs text-gray-400\">\n                                                    Re\u00E7ue le {new Date(invitation.createdAt).toLocaleDateString()}\n                                                </p>\n                                            </div>\n\n                                            <div className=\"flex space-x-2\">\n                                                <acceptFetcher.Form method=\"post\" action=\"/api/share\">\n                                                    <input type=\"hidden\" name=\"_action\" value=\"acceptShare\" />\n                                                    <input type=\"hidden\" name=\"token\" value={invitation.token} />\n                                                    <button type=\"submit\" className=\"inline-flex items-center px-3 py-1.5 border border-green-500 text-xs font-medium rounded-md text-green-500 bg-white hover:bg-green-50\">\n                                                        Accepter\n                                                    </button>\n                                                </acceptFetcher.Form>\n\n                                                <deleteFetcher.Form method=\"post\" action=\"/api/share\">\n                                                    <input type=\"hidden\" name=\"_action\" value=\"deleteShare\" />\n                                                    <input type=\"hidden\" name=\"shareId\" value={invitation.id} />\n                                                    <button type=\"submit\" className=\"inline-flex items-center px-3 py-1.5 border border-red-300 text-xs font-medium rounded-md text-red-500 bg-white hover:bg-red-50\">\n                                                        Refuser\n                                                    </button>\n                                                </deleteFetcher.Form>\n                                            </div>\n                                        </div>\n                                    </li>)}\n                            </ul>\n                        </div> : <p className=\"text-gray-500 bg-white p-6 rounded-lg shadow-md text-center\">\n                            Vous n'avez aucune invitation en attente.\n                        </p>}\n                </div>\n\n                {/* Partag\u00E9s avec moi */}\n                <div className=\"mb-12\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Partag\u00E9s avec moi</h2>\n\n                    {sharedWithMe?.length > 0 ? <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                            <ul className=\"divide-y divide-gray-200\">\n                                {sharedWithMe.map(share => <li key={share.id} className=\"p-4 hover:bg-gray-50\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <div>\n                                                <h3 className=\"font-medium text-gray-900\">{share.menu.name}</h3>\n                                                <p className=\"text-sm text-gray-500\">\n                                                    Partag\u00E9 par: {share.sharedByUser.email}\n                                                </p>\n                                                {share.includeShoppingList && <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800 mt-2\">\n                                                        Inclut la liste de courses\n                                                    </span>}\n                                            </div>\n\n                                            <div className=\"flex space-x-2\">\n                                                <Link to={`/menu?id=${share.menu.id}`} className=\"inline-flex items-center px-3 py-1.5 border border-rose-500 text-xs font-medium rounded-md text-rose-500 bg-white hover:bg-rose-50\">\n                                                    Voir le menu\n                                                </Link>\n\n                                                {share.includeShoppingList && share.shoppingList && <Link to={`/courses?listId=${share.shoppingList.id}`} className=\"inline-flex items-center px-3 py-1.5 border border-teal-500 text-xs font-medium rounded-md text-teal-500 bg-white hover:bg-teal-50\">\n                                                        Voir la liste\n                                                    </Link>}\n\n                                                <deleteFetcher.Form method=\"post\" action=\"/api/share\">\n                                                    <input type=\"hidden\" name=\"_action\" value=\"deleteShare\" />\n                                                    <input type=\"hidden\" name=\"shareId\" value={share.id} />\n                                                    <button type=\"submit\" className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\" onClick={() => confirm(\"\u00CAtes-vous s\u00FBr de vouloir supprimer ce partage ?\")}>\n                                                        Supprimer\n                                                    </button>\n                                                </deleteFetcher.Form>\n                                            </div>\n                                        </div>\n                                    </li>)}\n                            </ul>\n                        </div> : <p className=\"text-gray-500 bg-white p-6 rounded-lg shadow-md text-center\">\n                            Aucun menu n'est partag\u00E9 avec vous pour le moment.\n                        </p>}\n                </div>\n\n                {/* Partag\u00E9s par moi */}\n                <div>\n                    <h2 className=\"text-xl font-semibold mb-4\">Partag\u00E9s par moi</h2>\n\n                    {sharedByMe?.length > 0 ? <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                            <ul className=\"divide-y divide-gray-200\">\n                                {sharedByMe.map(share => <li key={share.id} className=\"p-4 hover:bg-gray-50\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <div>\n                                                <p className=\"text-sm text-gray-500\">\n                                                    Partag\u00E9 avec: {share.sharedWithEmail}\n                                                </p>\n                                                <div className=\"flex space-x-2 mt-1\">\n                                                    {share.includeShoppingList && <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-100 text-teal-800\">\n                                                            Inclut la liste de courses\n                                                        </span>}\n\n                                                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${share.isAccepted ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                                                        {share.isAccepted ? 'Accept\u00E9' : 'En attente'}\n                                                    </span>\n                                                </div>\n                                            </div>\n\n                                            <deleteFetcher.Form method=\"post\" action=\"/api/share\">\n                                                <input type=\"hidden\" name=\"_action\" value=\"deleteShare\" />\n                                                <input type=\"hidden\" name=\"shareId\" value={share.id} />\n                                                <button type=\"submit\" className=\"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\" onClick={() => confirm(\"\u00CAtes-vous s\u00FBr de vouloir supprimer ce partage ?\")}>\n                                                    Supprimer\n                                                </button>\n                                            </deleteFetcher.Form>\n                                        </div>\n                                    </li>)}\n                            </ul>\n                        </div> : <p className=\"text-gray-500 bg-white p-6 rounded-lg shadow-md text-center\">\n                            Vous n'avez partag\u00E9 aucun menu pour le moment.\n                        </p>}\n                </div>\n            </div>\n        </Layout>;\n}\n_s(PartagesPage, \"V61VKl9UVLTBq2yozuIijchWAds=\", false, function () {\n  return [useLoaderData, useFetcher, useFetcher];\n});\n_c = PartagesPage;\nvar _c;\n$RefreshReg$(_c, \"PartagesPage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
